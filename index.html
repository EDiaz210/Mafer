<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Un Mensaje para ti üå∑</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #f3ebf0 0%, #faf7fb 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        .tulip {
            position: fixed;
            font-size: 60px;
            opacity: 0.6;
            pointer-events: none;
        }

        .tulip:nth-child(1) { top: 10%; left: 5%; animation: float 6s ease-in-out infinite; }
        .tulip:nth-child(2) { top: 15%; right: 8%; animation: float 8s ease-in-out infinite 1s; }
        .tulip:nth-child(3) { top: 60%; left: 10%; animation: float 7s ease-in-out infinite 2s; }
        .tulip:nth-child(4) { top: 70%; right: 5%; animation: float 9s ease-in-out infinite 1.5s; }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .container {
            max-width: 600px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(233, 30, 99, 0.1);
            padding: 50px 40px;
            text-align: center;
            animation: fadeIn 1s ease-in;
            position: relative;
            z-index: 10;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* SECCI√ìN 1: CARTA CERRADA */
        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.8s ease-in;
        }

        .envelope {
            width: 360px;          /* m√°s ancho */
            height: auto;          /* evita deformaci√≥n */
            aspect-ratio: 3 / 2;   /* mantiene proporci√≥n del SVG */
            margin: 40px auto;
            background: transparent;
            border-radius: 10px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.12);
            cursor: pointer;
            transition: transform .25s ease, box-shadow .25s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .envelope:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.18);
        }

        .envelope svg {
            width: 92%;      /* llena el div sin tocar bordes */
            height: auto;
            display: block;
        }


        .envelope-flap {
            display: none;
        }

        .envelope.open .envelope-flap {
            transform: rotateX(180deg);
            opacity: 0;
        }

        .envelope-front {
            display: none;
        }

        .envelope-svg {
            width: 280px;
            height: 180px;
            display: block;
            margin: 0 auto;
        }

        .envelope-inside {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            padding: 20px;
            background: #fff9fa;
            border-radius: 0 0 10px 10px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.6s ease;
        }

        .envelope.open .envelope-inside {
            max-height: 150px;
        }

        /* SECCI√ìN 2: MENSAJE ESPECIAL */
        .spiderman-section {
            text-align: center;
        }

        .spiderman-emoji {
            font-size: 80px;
            margin: -90px 0 -60px 0;
            animation: swing 1.5s ease-in-out infinite;
            width: 300px;
            height: 300px;
            object-fit: contain;
        }

        @keyframes swing {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
        }

        .message-box {
            background: linear-gradient(135deg, #e91e63 0%, #d81b60 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.2em;
            line-height: 1.8;
            box-shadow: 0 5px 20px rgba(233, 30, 99, 0.25);
        }

        .message-box strong {
            font-size: 1.3em;
        }

        /* SECCI√ìN 3: CARTA COMPLETA */
        .heart {
            font-size: 80px;
            margin-bottom: 20px;
            animation: beat 1.2s infinite;
        }

        @keyframes beat {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        h1 {
            color: #e91e63;
            margin-bottom: 20px;
            font-size: 2;
            letter-spacing: 1px;
        }

        .date {
            color: #999;
            font-style: italic;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .message {
            color: #333;
            line-height: 1.8;
            font-size: 1.1em;
            margin: 30px 0;
        }

        .verse {
            background: #fef5fa;
            border-left: 4px solid #e91e63;
            padding: 20px;
            margin: 30px 0;
            font-style: italic;
            color: #666;
            border-radius: 5px;
        }

        .signature {
            margin-top: 40px;
            color: #e91e63;
            font-weight: bold;
            font-size: 1.2em;
        }

        .decorative-line {
            width: 100px;
            height: 2px;
            background: linear-gradient(to right, transparent, #e91e63, transparent);
            margin: 20px auto;
        }

        .footer {
            margin-top: 30px;
            color: #999;
            font-size: 0.9em;
        }

        .flower {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
        }

        .button-group {
            margin-top: 30px;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 30px;
            font-size: 1em;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-next {
            background: linear-gradient(135deg, #e91e63 0%, #d81b60 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(233, 30, 99, 0.3);
        }

        .btn-next:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(233, 30, 99, 0.4);
        }

        .btn-back {
            background: #e0e0e0;
            color: #333;
        }

        .btn-back:hover {
            background: #d0d0d0;
        }

        .music-player {
            background: white;
            border-radius: 18px;
            margin: 0;
            box-shadow: 0 4px 16px rgba(233, 30, 99, 0.08);
            overflow: hidden;
            font-size: 0.9em;
            padding: 30px 20px;
        }

        .player-header-bar {
            display: none;
        }

        .player-header-bar-label {
            color: #000;
            font-weight: 600;
            font-size: 0.95em;
        }

        .player-header-actions {
            display: flex;
            gap: 8px;
        }

        .player-header-btn {
            background: none;
            border: none;
            color: #999;
            font-size: 1.1em;
            cursor: pointer;
            transition: color 0.3s;
        }

        .player-header-btn:hover {
            color: #e91e63;
        }

        .spotify-player {
            padding: 0;
            background: transparent;
        }

        .player-album-art {
            width: 100%;
            max-width: 400px;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 100px;
            margin: 0 auto 30px;
            overflow: hidden;
        }

        .player-album-art img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 15px;
            padding: 8px;
        }

        .player-album-art svg {
            width: 70%;
            height: 70%;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        .player-song-info {
            color: #666;
            margin-bottom: 20px;
            text-align: center;
        }

        .player-song-name {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 6px;
            color: #333;
        }

        .player-song-artist {
            font-size: 0.95em;
            color: #999;
        }

        .player-controls-top {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            gap: 15px;
        }

        .player-progress-container {
            margin-bottom: 20px;
        }

        .player-progress-bar {
            width: 100%;
            height: 4px;
            background: #e0e0e0;
            border-radius: 2px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .player-progress-fill {
            height: 100%;
            background: #e91e63;
            border-radius: 2px;
            width: 0%;
            transition: width 0.1s linear;
        }

        .player-time {
            display: flex;
            justify-content: space-between;
            color: #999;
            font-size: 0.85em;
        }

        .player-controls-main {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin-bottom: 0;
        }

        .player-btn-small {
            background: none;
            border: none;
            color: #b3b3b3;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .player-btn-small:hover {
            color: #e91e63;
            transform: scale(1.15);
        }

        .player-btn-small.active {
            color: #e91e63;
        }

        .player-btn-play {
            background: #e91e63;
            color: #fff;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 1.8em;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .player-btn-play:hover {
            background: #c2185b;
            transform: scale(1.08);
        }

        .player-btn-play.active {
            background: #0066cc;
            box-shadow: 0 0 10px rgba(0, 102, 204, 0.4);
        }

        .player-btn-play.active:hover {
            background: #0052a3;
        }

        .player-controls-bottom {
            display: none;
        }

        .player-control-icon {
            background: none;
            border: none;
            color: #333;
            font-size: 1.2em;
            cursor: pointer;
            transition: color 0.3s;
            padding: 8px;
        }

        .player-control-icon:hover {
            color: #e91e63;
        }

        .music-label {
            display: none;
        }

        /* RESPONSIVE - M√ìVIL */
        @media (max-width: 768px) {
            .container {
                max-width: 95%;
                padding: 30px 20px;
            }

            .tulip {
                font-size: 40px;
            }

            .envelope {
                width: 280px;
                margin: 30px auto;
            }

            .envelope svg {
                width: 95%;
            }

            h1 {
                font-size: 1.8em;
            }

            .heart {
                font-size: 60px;
            }

            .date {
                font-size: 0.9em;
            }

            .message {
                font-size: 0.95em;
                line-height: 1.6;
            }

            .verse {
                padding: 15px;
                font-size: 0.95em;
            }

            .button-group {
                gap: 10px;
            }

            button {
                padding: 10px 24px;
                font-size: 0.95em;
            }

            .player-controls-main {
                gap: 20px;
            }

            .player-btn-small {
                font-size: 1.3em;
                padding: 8px;
            }

            .player-btn-play {
                width: 60px;
                height: 60px;
                font-size: 1.5em;
            }

            .player-song-name {
                font-size: 1.1em;
            }

            .player-song-artist {
                font-size: 0.9em;
            }

            .spiderman-emoji {
                width: 200px;
                height: 200px;
            }

            .message-box {
                padding: 20px;
                font-size: 1em;
            }

            .message-box strong {
                font-size: 1.1em;
            }

            .player-album-art {
                height: 250px;
                margin-bottom: 20px;
            }

            .music-player {
                padding: 20px 15px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 25px 15px;
            }

            h1 {
                font-size: 1.5em;
                margin-bottom: 15px;
            }

            .heart {
                font-size: 50px;
                margin-bottom: 15px;
            }

            .date {
                font-size: 0.85em;
                margin-bottom: 20px;
            }

            .message {
                font-size: 0.9em;
            }

            .verse {
                padding: 12px;
                margin: 20px 0;
                font-size: 0.9em;
            }

            .button-group {
                gap: 8px;
                margin-top: 20px;
            }

            button {
                padding: 8px 18px;
                font-size: 0.9em;
            }

            .player-controls-main {
                gap: 15px;
                margin-bottom: 20px;
            }

            .player-btn-small {
                font-size: 1.2em;
            }

            .player-btn-play {
                width: 55px;
                height: 55px;
                font-size: 1.3em;
            }

            .player-album-art {
                height: 200px;
                max-width: 300px;
                margin: 0 auto 20px;
            }

            .player-song-name {
                font-size: 1em;
            }

            .player-artist-name {
                font-size: 0.85em;
            }

            .spiderman-emoji {
                width: 150px;
                height: 150px;
                margin: -50px 0 -40px 0;
            }

            .message-box {
                padding: 15px;
                font-size: 0.95em;
                margin: 15px 0;
            }

            .music-player {
                padding: 15px 10px;
            }

            .player-progress-container {
                margin-bottom: 15px;
            }

            .player-time {
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="tulip">üå∑</div>
    <div class="tulip">üå∑</div>
    <div class="tulip">üå∑</div>
    <div class="tulip">üå∑</div>

    <div class="container">
        <!-- SECCI√ìN 1: CARTA CERRADA -->
        <div class="section active" id="section1">
            <h1>Tengo algo para ti</h1>
            <p style="color: #111111; margin: 20px 0; font-size: 1.1em;">Haz clic en la carta para abrir</p>
            
            <div class="envelope" onclick="openEnvelope()" style="width:100%; max-width:420px; margin:auto;">

                <svg viewBox="0 0 300 200" width="100%" height="auto">

                    <!-- Cuerpo del sobre -->
                    <rect x="30" y="55" width="240" height="130"
                        fill="#fff"
                        stroke="#000"
                        stroke-width="5"
                        shape-rendering="geometricPrecision"/>

                    <!-- Solapa PERFECTAMENTE centrada -->
                    <path d="M30 55 L150 130 L270 55"
                        fill="none"
                        stroke="#000"
                        stroke-width="5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        shape-rendering="geometricPrecision"/>

                    <!-- Coraz√≥n -->
                    <text x="150" y="115"
                        text-anchor="middle"
                        dominant-baseline="middle"
                        font-size="52"
                        fill="#ff2b2b"
                        stroke="#000"
                        stroke-width="2">‚ù§</text>

                </svg>
            </div>
        </div>

        <!-- SECCI√ìN 2: MENSAJE ESPECIAL -->
        <div class="section" id="section2">
            <div class="spiderman-section">
                <img src="image.png" alt="Animaci√≥n" class="spiderman-emoji">
                
                <h1 style="font-size: 2em; margin-top: 20px;">¬øSabes una cosa?</h1>
                
                <div class="message-box">
                    <strong>"Con gran belleza, viene una gran responsabilidad"</strong>
                    <br><br>
                    Y tengo la responsabilidad de decirte algo importante.
                </div>

                <p style="color: #666; font-size: 1.1em; margin: 30px 0; line-height: 1.8;">
                    As√≠ como Spider-Man protege a quienes ama, <br>
                    yo tambi√©n quiero que sepas cu√°nto me importas. üï∏Ô∏èü©∑
                </p>

                <div class="button-group">
                    <button class="btn-back" onclick="goToSection(1)">Atr√°s</button>
                    <button class="btn-next" onclick="goToSection(3)">Ver la carta</button>
                </div>
            </div>
        </div>

        <!-- SECCI√ìN 3: CARTA COMPLETA -->
        <div class="section" id="section3">
            <audio id="musicPlayer" style="display: none;">
                <source src="m.mp3" type="audio/mpeg">
            </audio>
            
            <div class="player-album-art" style="margin-top: 0; margin-bottom: 25px;">
                <img src="m.jpeg" alt="Album art">
            </div>

            <div class="player-song-info">
                <div class="player-song-name">Mafer</div>
                <div class="player-song-artist">Sebasti√°n Yatra</div>
            </div>

            <div class="player-progress-container">
                <div class="player-progress-bar" id="progressBar">
                    <div class="player-progress-fill" id="progressFill"></div>
                </div>
                <div class="player-time">
                    <span id="currentTime">0:33</span>
                    <span id="duration">0:59</span>
                </div>
            </div>

            <div class="player-controls-main" style="margin-bottom: 30px;">
                <button class="player-btn-small" id="shuffleBtn" onclick="toggleShuffle()">‚§®</button>
                <button class="player-btn-small" id="prevBtn" onclick="prevTrack()">‚óÑ‚óÑ</button>
                <button class="player-btn-play" id="playBtn" onclick="togglePlay()">‚ñ∂</button>
                <button class="player-btn-small" id="nextBtn" onclick="nextTrack()">‚ñ∫‚ñ∫</button>
                <button class="player-btn-small" id="repeatBtn" onclick="toggleRepeat()">‚Üª</button>
            </div>

            <div class="decorative-line" style="margin-bottom: 25px;"></div>

            

            <h1>Para ti, con mucho cari√±o</h1>

            <div class="date">14 de Febrero</div>

            <div class="decorative-line" style="margin-bottom: 25px;"></div>

            <p class="message">
                Quer√≠a aprovechar este d√≠a para decirte lo especial que eres para m√≠.
                <br><br>
                Me gusta conocerte mejor, compartir conversaciones contigo y disfrutar de tu compa√±√≠a. 
                Admiro tu fe, tu bondad y la manera en que ves el mundo.
                <br><br>
                No tengo prisa. Creo que las cosas hermosas se construyen con paciencia y sinceridad.
                Solo quer√≠a que supieras que me importas y que valoro mucho tu amistad.
            </p>

            <div class="verse">
                "El amor es paciente, es bondadoso... No se comporta con rudeza, no es ego√≠sta..."
                <br><br>
                <strong>1 Corintios 13:4</strong>
            </div>

            <p class="message">
                Gracias por ser como eres.
            </p>

            <div class="decorative-line" style="margin-bottom: 25px;"></div>

            <div class="heart" style="margin-bottom: 20px;">üå∑</div>

            <div class="signature">
                Con sinceridad,
                <br>
                Elkin 
            </div>

            <div class="button-group">
                <button class="btn-back" onclick="goToSection(2)">Atr√°s</button>
                <button class="btn-next" onclick="goToSection(1)">Comenzar de nuevo</button>
            </div>
        </div>
    </div>

    <script>
        const musicPlayer = document.getElementById('musicPlayer');
        const playBtn = document.getElementById('playBtn');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');

        const START_TIME = 33; // 0:33
        const END_TIME = 92; // 1:32

        let isShuffleOn = false;
        let repeatMode = 0; // 0: no repeat, 1: repeat all, 2: repeat one

        function togglePlay() {
            if (musicPlayer.paused) {
                musicPlayer.play();
                playBtn.textContent = '||';
            } else {
                musicPlayer.pause();
                playBtn.textContent = '‚ñ∂';
            }
        }

        function toggleShuffle() {
            isShuffleOn = !isShuffleOn;
            const btn = document.getElementById('shuffleBtn');
            if (isShuffleOn) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        }

        function toggleRepeat() {
            repeatMode = (repeatMode + 1) % 3;
            const btn = document.getElementById('repeatBtn');
            if (repeatMode === 0) {
                btn.textContent = '‚Üª';
                btn.classList.remove('active');
            } else if (repeatMode === 1) {
                btn.textContent = '‚Üª';
                btn.classList.add('active');
            } else {
                btn.textContent = '‚Üª';
                btn.classList.add('active');
            }
        }

        function prevTrack() {
            musicPlayer.currentTime = START_TIME;
            updateDisplay();
        }

        function nextTrack() {
            musicPlayer.currentTime = END_TIME - 1;
        }

        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        musicPlayer.addEventListener('loadedmetadata', function() {
            musicPlayer.currentTime = START_TIME;
            updateDisplay();
        });

        musicPlayer.addEventListener('timeupdate', function() {
            updateDisplay();
            
            // Pausar o repetir si llegamos al final
            if (this.currentTime >= END_TIME) {
                if (repeatMode === 0) {
                    this.pause();
                    this.currentTime = START_TIME;
                    playBtn.textContent = '‚ñ∂';
                } else {
                    this.currentTime = START_TIME;
                    this.play();
                    playBtn.textContent = '||';
                }
            }
        });

        musicPlayer.addEventListener('play', function() {
            // m√∫sica en reproducci√≥n
        });

        musicPlayer.addEventListener('pause', function() {
            // m√∫sica pausada
        });

        progressBar.addEventListener('click', function(e) {
            const rect = progressBar.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const percentage = clickX / rect.width;
            const totalDuration = END_TIME - START_TIME;
            musicPlayer.currentTime = START_TIME + (percentage * totalDuration);
        });

        function updateDisplay() {
            const currentSecs = musicPlayer.currentTime;
            const displayCurrent = Math.max(0, currentSecs);
            const remainingTime = Math.max(0, END_TIME - currentSecs);
            
            currentTimeEl.textContent = formatTime(displayCurrent);
            durationEl.textContent = formatTime(remainingTime);
            
            const totalDuration = END_TIME - START_TIME;
            const played = currentSecs - START_TIME;
            const percentage = Math.max(0, Math.min(100, (played / totalDuration) * 100));
            progressFill.style.width = percentage + '%';
        }

        function goToSection(sectionNumber) {
            // Ocultar todas las secciones
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });

            // Mostrar la secci√≥n solicitada
            document.getElementById('section' + sectionNumber).classList.add('active');

            // Si volvemos a la secci√≥n 1, resetear la carta
            if (sectionNumber === 1) {
                document.getElementById('envelope').classList.remove('open');
                musicPlayer.pause();
                musicPlayer.currentTime = START_TIME;
                playBtn.textContent = '‚ñ∂';
            }

            // Si vamos a la secci√≥n 3, preparar la m√∫sica
            if (sectionNumber === 3) {
                setTimeout(() => {
                    musicPlayer.currentTime = START_TIME;
                    updateDisplay();
                }, 100);
            }
        }

        function openEnvelope() {
            goToSection(2);
        }

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            if (musicPlayer.readyState >= 1) {
                musicPlayer.currentTime = START_TIME;
                updateDisplay();
            }
        });
    </script>
</body>
</html>